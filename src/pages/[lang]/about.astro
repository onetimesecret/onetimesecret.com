---
// src/pages/[lang]/about.astro

import Layout from "@/layouts/Layout.astro";
import { createLocaleI18n } from "@/i18n";
import { loadLocalizedPage } from "@/utils/content"; // Import the new utility

import { getLanguagePaths } from "@config/astro/i18n";

export async function getStaticPaths() {
  return getLanguagePaths();
}

const { lang = "en" } = Astro.params;

// Initialize i18n asynchronously
const i18n = await createLocaleI18n(lang);
const { t } = i18n.global;

// Use the utility function to load content
const { Content, headings, data } = await loadLocalizedPage(
  "pages",
  lang,
  "about",
);
---

<Layout
  title={`${data.title} | Onetime Secret`}
  description={data.description ||
    "Learn about Onetime Secret, our mission to provide secure one-time sharing, and the team behind our service."}>
  <div class="flex min-h-screen flex-col bg-white dark:bg-gray-900">
    <Content />
  </div>
</Layout>
