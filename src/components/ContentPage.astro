---
/**
 * ContentPage.astro
 * A reusable component for rendering content collection pages
 * with consistent layout, hero sections, and i18n support.
 */
import { type CollectionEntry } from "astro:content";
import MarkdownLayout from "@/layouts/MarkdownLayout.astro";
import MainNavigation from "@/components/vue/layouts/MainNavigation.vue";
import { DEFAULT_LANGUAGE, LANGUAGE_META } from "@config/astro/i18n";
import type { SupportedLanguage } from "@/i18n";
import type { MessageSchema } from "@/i18n";

export interface Props {
  page: CollectionEntry<"pages">;
  renderedContent: {
    Content: any;
    headings: any;
  };
  lang: SupportedLanguage;
  initialMessages: Record<string, MessageSchema>;
}

const {
  page,
  renderedContent: { Content, headings },
  lang = DEFAULT_LANGUAGE,
  initialMessages,
} = Astro.props;

const langMeta = LANGUAGE_META[lang];
const { heroType = "simple" } = page.data;
---

<MarkdownLayout
  title={`${page.data.title} | Onetime Secret`}
  description={page.data.description || `${page.data.title} | Onetime Secret`}
  htmlLang={lang}
  langDir={langMeta.dir}
  initialMessages={initialMessages}
  headings={headings}>
  <div slot="header">
    {
      heroType !== "none" && (
        <div class="relative overflow-hidden border-b border-slate-200/80 bg-gradient-to-b from-blue-50 to-white py-16 sm:py-24 dark:border-slate-800/50 dark:from-slate-800 dark:to-slate-900">
          <div class="pointer-events-none absolute inset-0 opacity-10 dark:opacity-5">
            <div class="bg-gradient-radial absolute top-0 right-0 h-1/3 w-1/3 transform from-blue-200 to-transparent blur-3xl" />
            <div class="bg-gradient-radial absolute bottom-0 left-0 h-1/3 w-1/3 transform from-blue-200 to-transparent blur-3xl" />
          </div>
          <div class="relative mx-auto max-w-7xl px-6 lg:px-8">
            <div class="mx-auto max-w-3xl lg:text-center">
              <div class="mb-6 inline-flex items-center justify-center rounded-full bg-blue-100 px-3 py-1.5 text-sm font-medium text-blue-600 ring-1 ring-blue-600/20 ring-inset dark:bg-blue-950 dark:text-blue-300 dark:ring-blue-800/30">
                <span class="mr-1.5">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="h-4 w-4">
                    <path
                      fill-rule="evenodd"
                      d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </span>
                Onetime Secret
              </div>
              <h1 class="bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-4xl font-bold tracking-tight text-slate-900 text-transparent sm:text-5xl md:text-6xl dark:from-white dark:to-slate-300 dark:text-white">
                {page.data.title}
              </h1>
              {page.data.description && (
                <p class="mx-auto mt-6 max-w-2xl text-lg leading-8 text-slate-600 dark:text-slate-300">
                  {page.data.description}
                </p>
              )}
            </div>
          </div>
        </div>
      )
    }
  </div>

  <Content />
</MarkdownLayout>
